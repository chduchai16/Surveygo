openapi: 3.0.0
info:
  title: Tài liệu API SurveyGo
  version: 2.0.0
  description: |
    Tài liệu API đầy đủ cho hệ thống SurveyGo - Hệ thống quản lý khảo sát trực tuyến.
    
    ## Tính năng chính
    - Xác thực người dùng (Auth)
    - Quản lý khảo sát và câu hỏi
    - Hệ thống điểm thưởng
    - Đổi quà và phần thưởng
    - Sự kiện và vòng quay may mắn
    - Tài khoản Premium
    - Điểm danh hàng ngày
    
servers:
  - url: http://localhost/SurveyGo
    description: Server cục bộ (Localhost)

components:
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: PHPSESSID
      description: Session-based authentication
  schemas:
    User:
      type: object
      properties:
        id: {type: integer, description: ID người dùng}
        name: {type: string, description: Tên người dùng}
        email: {type: string, description: Email}
        role: {type: string, description: Vai trò (user, admin, moderator)}
        avatar: {type: string, description: URL ảnh đại diện}
        phone: {type: string, description: Số điện thoại}
        gender: {type: string, description: Giới tính}
        is_premium: {type: boolean, description: Trạng thái Premium}
    Survey:
      type: object
      properties:
        id: {type: integer, description: ID khảo sát}
        tieuDe: {type: string, description: Tiêu đề khảo sát}
        moTa: {type: string, description: Mô tả chi tiết}
        loaiKhaoSat: {type: string, description: Loại khảo sát}
        trangThai: {type: string, description: Trạng thái (draft, published, approved, rejected)}
        maNguoiTao: {type: integer, description: ID người tạo}
        created_at: {type: string, format: date-time, description: Thời gian tạo}
        maSuKien:
          type: integer
          nullable: true
          description: ID sự kiện gắn với khảo sát
        points: {type: integer, description: Điểm thưởng khi hoàn thành}
    Question:
      type: object
      properties:
        id: {type: integer, description: ID câu hỏi}
        noiDungCauHoi: {type: string, description: Nội dung câu hỏi}
        loaiCauHoi: {type: string, description: Loại câu hỏi (single_choice, multiple_choice, text, rating, yesno)}
        maKhaoSat: {type: integer, description: ID khảo sát liên quan}
        options: {type: array, items: {type: string}, description: Các lựa chọn (nếu có)}
    Event:
      type: object
      properties:
        id: {type: integer}
        name: {type: string}
        description: {type: string}
        start_date: {type: string, format: date-time}
        end_date: {type: string, format: date-time}
        status: {type: string, description: Trạng thái sự kiện}
        surveys: {type: integer, description: Số khảo sát gắn với sự kiện}
    Reward:
      type: object
      properties:
        id: {type: integer}
        name: {type: string, description: Tên phần thưởng}
        description: {type: string, description: Mô tả}
        points: {type: integer, description: Điểm cần để đổi}
        category: {type: string, description: Danh mục}
        stock: {type: integer, description: Số lượng còn lại}
        is_active: {type: boolean, description: Trạng thái hoạt động}
    Redemption:
      type: object
      properties:
        id: {type: integer}
        user_id: {type: integer}
        reward_id: {type: integer}
        status: {type: string, description: Trạng thái (pending, approved, rejected, completed)}
        account_number: {type: string, description: Số tài khoản (nếu là tiền mặt)}
        account_name: {type: string, description: Tên tài khoản}
        transfer_status: {type: string, description: Trạng thái chuyển tiền}
        created_at: {type: string, format: date-time}
    ApiResponse:
      type: object
      properties:
        error: {type: boolean}
        message: {type: string}
        data: {type: object}

security:
  - cookieAuth: []

tags:
  - name: Auth - Xác thực
    description: Đăng ký, đăng nhập, quản lý tài khoản
  - name: Survey - Khảo sát
    description: Quản lý khảo sát
  - name: Question - Câu hỏi
    description: Quản lý câu hỏi
  - name: Event - Sự kiện
    description: Quản lý sự kiện
  - name: Reward - Phần thưởng
    description: Danh sách và đổi phần thưởng
  - name: Redemption - Đổi quà
    description: Quản lý yêu cầu đổi quà
  - name: Daily Reward - Điểm danh
    description: Điểm danh hàng ngày
  - name: Premium
    description: Tính năng Premium
  - name: User - Người dùng
    description: Quản lý người dùng và điểm
  - name: Invite - Mời bạn
    description: Hệ thống mời bạn bè
  - name: Feedback - Phản hồi
    description: Quản lý phản hồi
  - name: Contact - Liên hệ
    description: Tin nhắn liên hệ
  - name: Activity Log
    description: Nhật ký hoạt động
  - name: Bank - Ngân hàng
    description: Xác thực và chuyển tiền ngân hàng
  - name: Admin - Quản trị
    description: API dành cho Admin
  - name: Public - Công khai
    description: API công khai

paths:
  # ==================== AUTH ====================
  /api/register:
    post:
      tags: [Auth - Xác thực]
      summary: Đăng ký người dùng mới
      description: Tạo tài khoản mới cho người dùng.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [name, email, password]
              properties:
                name: {type: string, description: Tên đầy đủ}
                email: {type: string, format: email, description: Địa chỉ email}
                password: {type: string, minLength: 6, description: Mật khẩu (tối thiểu 6 ký tự)}
                role: {type: string, enum: [user, admin, moderator], description: Vai trò (mặc định là user)}
                invite_code: {type: string, description: Mã mời (nếu có)}
      responses:
        201: {description: Đăng ký thành công}
        422: {description: Lỗi xác thực dữ liệu}

  /api/login:
    post:
      tags: [Auth - Xác thực]
      summary: Đăng nhập
      description: Đăng nhập vào hệ thống để lấy session.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email, password]
              properties:
                email: {type: string, description: Email đăng nhập}
                password: {type: string, description: Mật khẩu}
      responses:
        200: {description: Đăng nhập thành công}
        401: {description: Sai thông tin đăng nhập}

  /api/logout:
    post:
      tags: [Auth - Xác thực]
      summary: Đăng xuất
      description: Hủy phiên làm việc hiện tại.
      responses:
        200: {description: Đăng xuất thành công}

  /api/auth/update-profile:
    post:
      tags: [Auth - Xác thực]
      summary: Cập nhật thông tin cá nhân
      security: [{cookieAuth: []}]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id: {type: integer}
                name: {type: string}
                email: {type: string}
                phone: {type: string}
                gender: {type: string}
                avatar: {type: string}
      responses:
        200: {description: Cập nhật thành công}

  /api/auth/change-password:
    post:
      tags: [Auth - Xác thực]
      summary: Đổi mật khẩu
      security: [{cookieAuth: []}]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [id, current_password, new_password, confirm_password]
              properties:
                id: {type: integer}
                current_password: {type: string}
                new_password: {type: string}
                confirm_password: {type: string}
      responses:
        200: {description: Đổi mật khẩu thành công}

  # ==================== SURVEYS ====================
  /api/surveys:
    get:
      tags: [Survey - Khảo sát]
      summary: Lấy danh sách khảo sát
      parameters:
        - {name: page, in: query, schema: {type: integer}, description: Số trang}
        - {name: limit, in: query, schema: {type: integer}, description: Số lượng mỗi trang}
        - {name: search, in: query, schema: {type: string}, description: Từ khóa tìm kiếm}
        - {name: trangThai, in: query, schema: {type: string}, description: Lọc theo trạng thái}
        - {name: loaiKhaoSat, in: query, schema: {type: string}, description: Lọc theo loại khảo sát}
        - {name: maSuKien, in: query, schema: {type: integer}, description: Lọc theo sự kiện}
      responses:
        200: {description: Danh sách khảo sát thành công}
    post:
      tags: [Survey - Khảo sát]
      summary: Tạo khảo sát mới
      security: [{cookieAuth: []}]
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Survey'
      responses:
        201: {description: Tạo khảo sát thành công}
    put:
      tags: [Survey - Khảo sát]
      summary: Cập nhật khảo sát
      security: [{cookieAuth: []}]
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/Survey'
                - type: object
                  properties:
                    id: {type: integer, description: Bắt buộc để cập nhật}
      responses:
        200: {description: Cập nhật thành công}
    delete:
      tags: [Survey - Khảo sát]
      summary: Xóa khảo sát
      security: [{cookieAuth: []}]
      parameters:
        - {name: id, in: query, required: true, schema: {type: integer}, description: ID khảo sát cần xóa}
      responses:
        200: {description: Xóa thành công}

  /api/surveys/show:
    get:
      tags: [Survey - Khảo sát]
      summary: Lấy chi tiết khảo sát
      parameters:
        - {name: id, in: query, required: true, schema: {type: integer}, description: ID khảo sát}
      responses:
        200: {description: Thông tin chi tiết khảo sát}

  /api/surveys/quick-poll:
    post:
      tags: [Survey - Khảo sát]
      summary: Tạo khảo sát nhanh (Quick Poll)
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [title, questionType]
              properties:
                title: {type: string, description: Tiêu đề}
                description: {type: string, description: Mô tả}
                questionType: {type: string, enum: [single, multiple, text, rating, yesno], description: Loại câu hỏi}
                options: {type: array, items: {type: string}, description: Các lựa chọn trả lời}
                maNguoiTao: {type: integer}
                points: {type: integer, description: Điểm thưởng}
      responses:
        201: {description: Tạo quick poll thành công}

  /api/surveys/publish:
    post:
      tags: [Survey - Khảo sát]
      summary: Công bố khảo sát
      security: [{cookieAuth: []}]
      parameters:
        - {name: id, in: query, required: true, schema: {type: integer}, description: ID khảo sát}
      responses:
        200: {description: Công bố thành công}

  /api/surveys/approve:
    post:
      tags: [Survey - Khảo sát]
      summary: Phê duyệt / Từ chối khảo sát
      security: [{cookieAuth: []}]
      parameters:
        - {name: id, in: query, required: true, schema: {type: integer}}
        - {name: status, in: query, schema: {type: string, enum: [approved, rejected]}, description: Trạng thái mới}
      responses:
        200: {description: Cập nhật trạng thái thành công}

  /api/surveys/attach-question:
    post:
      tags: [Survey - Khảo sát]
      summary: Gắn câu hỏi vào khảo sát
      security: [{cookieAuth: []}]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                maKhaoSat: {type: integer}
                maCauHoi: {type: integer}
      responses:
        200: {description: Gắn thành công}

  /api/surveys/detach-question:
    post:
      tags: [Survey - Khảo sát]
      summary: Gỡ câu hỏi khỏi khảo sát
      security: [{cookieAuth: []}]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                maKhaoSat: {type: integer}
                maCauHoi: {type: integer}
      responses:
        200: {description: Gỡ thành công}

  /api/surveys/{id}/submit:
    post:
      tags: [Survey - Khảo sát]
      summary: Nộp bài khảo sát
      security: [{cookieAuth: []}]
      parameters:
        - {name: id, in: path, required: true, schema: {type: integer}}
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [userId, answers]
              properties:
                userId: {type: integer}
                answers: {type: array, items: {type: object}, description: Danh sách câu trả lời}
      responses:
        200: {description: Nộp bài thành công}

  /api/surveys/{id}/check-submission:
    get:
      tags: [Survey - Khảo sát]
      summary: Kiểm tra trạng thái nộp bài
      security: [{cookieAuth: []}]
      parameters:
        - {name: id, in: path, required: true, schema: {type: integer}}
        - {name: userId, in: query, schema: {type: integer}}
      responses:
        200: {description: Kết quả kiểm tra}

  /api/surveys/question-responses:
    get:
      tags: [Survey - Khảo sát]
      summary: Lấy câu trả lời của câu hỏi (Admin)
      security: [{cookieAuth: []}]
      parameters:
        - {name: surveyId, in: query, schema: {type: integer}}
        - {name: questionId, in: query, schema: {type: integer}}
      responses:
        200: {description: Danh sách câu trả lời}

  /api/surveys/hourly-stats:
    get:
      tags: [Survey - Khảo sát]
      summary: Thống kê theo giờ
      security: [{cookieAuth: []}]
      responses:
        200: {description: Dữ liệu thống kê}

  # ==================== QUESTIONS ====================
  /api/questions:
    get:
      tags: [Question - Câu hỏi]
      summary: Lấy danh sách câu hỏi
      responses:
        200: {description: Danh sách câu hỏi}
    post:
      tags: [Question - Câu hỏi]
      summary: Tạo câu hỏi mới
      security: [{cookieAuth: []}]
      requestBody:
        content:
          application/json:
            schema:
               $ref: '#/components/schemas/Question'
      responses:
        201: {description: Tạo thành công}
    put:
      tags: [Question - Câu hỏi]
      summary: Cập nhật câu hỏi
      security: [{cookieAuth: []}]
      requestBody:
        content:
          application/json:
            schema:
               $ref: '#/components/schemas/Question'
      responses:
        200: {description: Cập nhật thành công}
    delete:
      tags: [Question - Câu hỏi]
      summary: Xóa câu hỏi
      security: [{cookieAuth: []}]
      parameters:
        - {name: id, in: query, schema: {type: integer}}
      responses:
        200: {description: Xóa thành công}

  /api/questions/{id}:
    delete:
      tags: [Question - Câu hỏi]
      summary: Xóa câu hỏi theo ID (Path param)
      security: [{cookieAuth: []}]
      parameters:
        - {name: id, in: path, required: true, schema: {type: integer}}
      responses:
        200: {description: Xóa thành công}

  /api/questions/show:
    get:
      tags: [Question - Câu hỏi]
      summary: Chi tiết câu hỏi
      parameters:
        - {name: id, in: query, schema: {type: integer}}
      responses:
        200: {description: Chi tiết câu hỏi}

  /api/questions/by-survey:
    get:
      tags: [Question - Câu hỏi]
      summary: Lấy câu hỏi theo khảo sát
      parameters:
        - {name: surveyId, in: query, schema: {type: integer}}
      responses:
        200: {description: Danh sách câu hỏi}

  /api/questions/{id}/answers:
    get:
      tags: [Question - Câu hỏi]
      summary: Lấy danh sách câu trả lời của câu hỏi
      parameters:
         - {name: id, in: path, required: true, schema: {type: integer}}
      responses:
        200: {description: Danh sách câu trả lời}

  # ==================== EVENTS ====================
  /api/events:
    get:
      tags: [Event - Sự kiện]
      summary: Lấy danh sách sự kiện
      responses:
         200: {description: Danh sách sự kiện}
    post:
      tags: [Event - Sự kiện]
      summary: Tạo sự kiện mới
      security: [{cookieAuth: []}]
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Event'
      responses:
         201: {description: Tạo thành công}
    put:
      tags: [Event - Sự kiện]
      summary: Cập nhật sự kiện
      security: [{cookieAuth: []}]
      responses:
         200: {description: Cập nhật thành công}
    delete:
      tags: [Event - Sự kiện]
      summary: Xóa sự kiện
      security: [{cookieAuth: []}]
      responses:
         200: {description: Xóa thành công}

  /api/events/show:
    get:
      tags: [Event - Sự kiện]
      summary: Chi tiết sự kiện
      parameters:
        - {name: id, in: query, schema: {type: integer}}
      responses:
         200: {description: Chi tiết sự kiện}

  /api/events/{id}/join:
    post:
      tags: [Event - Sự kiện]
      summary: Tham gia sự kiện
      security: [{cookieAuth: []}]
      parameters:
         - {name: id, in: path, required: true, schema: {type: integer}}
      responses:
         200: {description: Tham gia thành công}

  /api/events/lucky-wheel/spin:
    post:
      tags: [Event - Sự kiện]
      summary: Quay vòng quay may mắn
      security: [{cookieAuth: []}]
      responses:
         200: {description: Kết quả quay thưởng}

  # ==================== REWARDS ====================
  /api/rewards:
    get:
      tags: [Reward - Phần thưởng]
      summary: Lấy danh sách phần thưởng (Công khai)
      responses:
         200: {description: Danh sách phần thưởng}

  /api/rewards/{id}:
    get:
      tags: [Reward - Phần thưởng]
      summary: Chi tiết phần thưởng
      parameters:
         - {name: id, in: path, required: true, schema: {type: integer}}
      responses:
         200: {description: Chi tiết}

  /api/rewards/filter:
    get:
      tags: [Reward - Phần thưởng]
      summary: Lọc phần thưởng
      parameters:
        - {name: category, in: query, schema: {type: string}}
        - {name: minPoints, in: query, schema: {type: integer}}
        - {name: maxPoints, in: query, schema: {type: integer}}
      responses:
         200: {description: Danh sách kết quả}

  /api/rewards/search:
    get:
      tags: [Reward - Phần thưởng]
      summary: Tìm kiếm phần thưởng
      parameters:
        - {name: q, in: query, schema: {type: string}}
      responses:
         200: {description: Kết quả tìm kiếm}

  /api/rewards/giftcard/details:
    get:
      tags: [Reward - Phần thưởng]
      summary: Chi tiết Gift Card
      parameters:
        - {name: id, in: query, schema: {type: integer}}
      responses:
         200: {description: Chi tiết gift card}

  /api/rewards/redeem:
    post:
      tags: [Reward - Phần thưởng]
      summary: Đổi thưởng
      security: [{cookieAuth: []}]
      requestBody:
         content:
           application/json:
             schema:
               type: object
               properties:
                 rewardId: {type: integer, description: ID phần thưởng}
                 account_number: {type: string, description: Số tài khoản (nếu cần)}
      responses:
         200: {description: Đổi thưởng thành công}

  # ==================== DAILY REWARDS ====================
  /api/daily-rewards/status:
    get:
      tags: [Daily Reward - Điểm danh]
      summary: Kiểm tra trạng thái điểm danh hàng ngày
      security: [{cookieAuth: []}]
      responses:
         200: {description: Trạng thái điểm danh}

  /api/daily-rewards/claim:
    post:
      tags: [Daily Reward - Điểm danh]
      summary: Nhận thưởng hàng ngày
      security: [{cookieAuth: []}]
      responses:
         200: {description: Kết quả nhận thưởng}

  # ==================== PREMIUM ====================
  /api/premium/create-transaction:
    post:
      tags: [Premium]
      summary: Tạo giao dịch Premium
      description: Tạo giao dịch thanh toán để đăng ký Premium
      security: [{cookieAuth: []}]
      responses:
         200:
           description: Thông tin giao dịch
           content:
             application/json:
               schema:
                 type: object
                 properties:
                   qr_link: {type: string, description: Link QR thanh toán}
                   amount: {type: integer, description: Số tiền cần thanh toán}
                   transaction_code: {type: string, description: Mã giao dịch}

  /api/premium/check-payment:
    get:
      tags: [Premium]
      summary: Kiểm tra trạng thái thanh toán Premium
      security: [{cookieAuth: []}]
      responses:
         200:
           description: Trạng thái thanh toán
           content:
             application/json:
               schema:
                 type: object
                 properties:
                   status: {type: string, enum: [pending, completed]}
                   amount_expected: {type: integer}
                   amount_received: {type: integer}

  /api/premium/status:
    get:
      tags: [Premium]
      summary: Lấy trạng thái Premium của user
      security: [{cookieAuth: []}]
      responses:
         200:
           description: Trạng thái Premium
           content:
             application/json:
               schema:
                 type: object
                 properties:
                   is_premium: {type: boolean}
                   premium_until: {type: string, format: date-time}

  # ==================== REDEMPTIONS (User) ====================
  /api/redemptions/my:
    get:
      tags: [Redemption - Đổi quà]
      summary: Lịch sử đổi quà của tôi
      security: [{cookieAuth: []}]
      responses:
         200: {description: Danh sách lịch sử}

  /api/redemptions/detail:
    get:
      tags: [Redemption - Đổi quà]
      summary: Chi tiết đơn đổi quà
      security: [{cookieAuth: []}]
      parameters:
        - {name: id, in: query, schema: {type: integer}}
      responses:
         200: {description: Chi tiết}

  /api/redemptions/create:
    post:
      tags: [Redemption - Đổi quà]
      summary: Tạo yêu cầu đổi quà
      security: [{cookieAuth: []}]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reward_id: {type: integer}
                account_number: {type: string}
      responses:
         200: {description: Tạo thành công}

  # ==================== USER POINTS ====================
  /api/user-points/balance:
    get:
      tags: [User - Người dùng]
      summary: Lấy số dư điểm
      security: [{cookieAuth: []}]
      responses:
         200: {description: Số dư điểm}

  /api/user-points/check:
    get:
      tags: [User - Người dùng]
      summary: Kiểm tra đủ điểm không
      security: [{cookieAuth: []}]
      parameters:
        - {name: amount, in: query, schema: {type: integer}}
      responses:
         200: {description: Kết quả}

  /api/user-points/hourly-stats:
    get:
      tags: [User - Người dùng]
      summary: Thống kê điểm theo giờ
      security: [{cookieAuth: []}]
      responses:
         200: {description: Dữ liệu thống kê}

  /api/users/points:
    get:
      tags: [User - Người dùng]
      summary: Lấy điểm người dùng
      security: [{cookieAuth: []}]
      responses:
         200: {description: Điểm người dùng}

  /api/users/profile-stats:
    get:
      tags: [User - Người dùng]
      summary: Thống kê hồ sơ người dùng
      security: [{cookieAuth: []}]
      responses:
         200: {description: Thống kê}

  # ==================== INVITE ====================
  /api/invites/my-invite:
    get:
      tags: [Invite - Mời bạn]
      summary: Lấy mã mời của tôi
      security: [{cookieAuth: []}]
      responses:
         200: {description: Mã mời}

  /api/invites/validate:
    get:
      tags: [Invite - Mời bạn]
      summary: Xác thực mã mời
      parameters:
        - {name: code, in: query, schema: {type: string}}
      responses:
         200: {description: Kết quả xác thực}

  /api/invites/stats:
    get:
      tags: [Invite - Mời bạn]
      summary: Thống kê mời bạn
      security: [{cookieAuth: []}]
      responses:
         200: {description: Thống kê}

  # ==================== FEEDBACK ====================
  /api/feedbacks:
    get:
      tags: [Feedback - Phản hồi]
      summary: Lấy danh sách phản hồi
      security: [{cookieAuth: []}]
      responses:
         200: {description: Danh sách}
    post:
      tags: [Feedback - Phản hồi]
      summary: Tạo phản hồi
      security: [{cookieAuth: []}]
      responses:
         201: {description: Gửi thành công}
    put:
      tags: [Feedback - Phản hồi]
      summary: Cập nhật phản hồi
      security: [{cookieAuth: []}]
      responses:
         200: {description: Cập nhật thành công}
    delete:
      tags: [Feedback - Phản hồi]
      summary: Xóa phản hồi
      security: [{cookieAuth: []}]
      responses:
         200: {description: Xóa thành công}

  /api/feedbacks/show:
    get:
      tags: [Feedback - Phản hồi]
      summary: Chi tiết phản hồi
      security: [{cookieAuth: []}]
      responses:
         200: {description: Chi tiết}
  
  /api/feedbacks/submit:
    post:
      tags: [Feedback - Phản hồi]
      summary: Gửi phản hồi (Public/User)
      security: [{cookieAuth: []}]
      responses:
         200: {description: Gửi thành công}

  /api/feedbacks/{id}:
    get:
      tags: [Feedback - Phản hồi]
      summary: Lấy chi tiết phản hồi theo ID
      security: [{cookieAuth: []}]
      parameters:
        - {name: id, in: path, required: true, schema: {type: integer}}
      responses:
         200: {description: Chi tiết}
    put:
      tags: [Feedback - Phản hồi]
      summary: Cập nhật phản hồi theo ID
      security: [{cookieAuth: []}]
      parameters:
        - {name: id, in: path, required: true, schema: {type: integer}}
      responses:
         200: {description: Cập nhật thành công}
    delete:
      tags: [Feedback - Phản hồi]
      summary: Xóa phản hồi theo ID
      security: [{cookieAuth: []}]
      parameters:
        - {name: id, in: path, required: true, schema: {type: integer}}
      responses:
         200: {description: Xóa thành công}

  # ==================== CONTACT ====================
  /api/contact-messages:
    get:
      tags: [Contact - Liên hệ]
      summary: Lấy danh sách tin nhắn (Admin)
      security: [{cookieAuth: []}]
      responses:
         200: {description: Danh sách tin nhắn}
    post:
      tags: [Contact - Liên hệ]
      summary: Gửi tin nhắn liên hệ
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name: {type: string}
                email: {type: string}
                subject: {type: string}
                message: {type: string}
      responses:
         200: {description: Gửi thành công}
    put:
      tags: [Contact - Liên hệ]
      summary: Cập nhật trạng thái tin nhắn
      security: [{cookieAuth: []}]
      responses:
         200: {description: Cập nhật thành công}
    delete:
      tags: [Contact - Liên hệ]
      summary: Xóa tin nhắn
      security: [{cookieAuth: []}]
      responses:
         200: {description: Xóa thành công}

  /api/contact-messages/show:
    get:
      tags: [Contact - Liên hệ]
      summary: Chi tiết tin nhắn
      security: [{cookieAuth: []}]
      responses:
         200: {description: Chi tiết}

  /api/contact-messages/{id}:
    get:
      tags: [Contact - Liên hệ]
      summary: Chi tiết tin nhắn theo ID
      security: [{cookieAuth: []}]
      parameters:
        - {name: id, in: path, required: true, schema: {type: integer}}
      responses:
         200: {description: Chi tiết}
    put:
      tags: [Contact - Liên hệ]
      summary: Cập nhật tin nhắn theo ID
      security: [{cookieAuth: []}]
      parameters:
        - {name: id, in: path, required: true, schema: {type: integer}}
      responses:
         200: {description: Cập nhật thành công}
    delete:
      tags: [Contact - Liên hệ]
      summary: Xóa tin nhắn theo ID
      security: [{cookieAuth: []}]
      parameters:
        - {name: id, in: path, required: true, schema: {type: integer}}
      responses:
         200: {description: Xóa thành công}

  # ==================== ACTIVITY LOG ====================
  /api/activity-logs/my:
    get:
      tags: [Activity Log]
      summary: Nhật ký hoạt động của tôi
      security: [{cookieAuth: []}]
      responses:
         200: {description: Danh sách log}

  # ==================== BANK ====================
  /api/bank/verify-account:
    post:
      tags: [Bank - Ngân hàng]
      summary: Xác thực tài khoản ngân hàng
      security: [{cookieAuth: []}]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                bank_code: {type: string, description: Mã ngân hàng}
                account_number: {type: string, description: Số tài khoản}
      responses:
         200:
           description: Kết quả xác thực
           content:
             application/json:
               schema:
                 type: object
                 properties:
                   accName: {type: string, description: Tên chủ tài khoản}

  /api/bank/submit-transfer:
    post:
      tags: [Bank - Ngân hàng]
      summary: Thực hiện chuyển tiền
      security: [{cookieAuth: []}]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                redemption_id: {type: integer}
                bank_code: {type: string}
                account_number: {type: string}
                amount: {type: integer}
      responses:
         200: {description: Kết quả chuyển tiền}

  # ==================== ADMIN ====================
  /api/admin/rewards:
    get:
      tags: [Admin - Quản trị]
      summary: Quản lý danh sách phần thưởng
      security: [{cookieAuth: []}]
      responses:
         200: {description: Danh sách}
    post:
      tags: [Admin - Quản trị]
      summary: Tạo phần thưởng mới
      security: [{cookieAuth: []}]
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Reward'
      responses:
         201: {description: Tạo thành công}

  /api/admin/rewards/{id}:
    put:
      tags: [Admin - Quản trị]
      summary: Cập nhật phần thưởng
      security: [{cookieAuth: []}]
      parameters:
         - {name: id, in: path, required: true, schema: {type: integer}}
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Reward'
      responses:
         200: {description: Cập nhật thành công}

  /api/admin/rewards/{id}/delete:
    post:
      tags: [Admin - Quản trị]
      summary: Xóa phần thưởng
      security: [{cookieAuth: []}]
      parameters:
         - {name: id, in: path, required: true, schema: {type: integer}}
      responses:
         200: {description: Xóa thành công}

  /api/admin/rewards/{id}/toggle:
    post:
      tags: [Admin - Quản trị]
      summary: Bật/Tắt phần thưởng (Ẩn/Hiện)
      security: [{cookieAuth: []}]
      parameters:
         - {name: id, in: path, required: true, schema: {type: integer}}
      responses:
         200: {description: Thay đổi trạng thái thành công}

  /api/admin/rewards/{id}/stock:
    post:
      tags: [Admin - Quản trị]
      summary: Cập nhật kho (số lượng)
      security: [{cookieAuth: []}]
      parameters:
         - {name: id, in: path, required: true, schema: {type: integer}}
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                stock: {type: integer}
      responses:
         200: {description: Cập nhật thành công}

  /api/admin/rewards/redemptions/{id}/status:
    post:
      tags: [Admin - Quản trị]
      summary: Cập nhật trạng thái đổi thưởng
      security: [{cookieAuth: []}]
      parameters:
         - {name: id, in: path, required: true, schema: {type: integer}}
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                status: {type: string, enum: [pending, approved, rejected, completed]}
      responses:
         200: {description: Cập nhật thành công}

  /api/admin/redemptions:
    get:
      tags: [Admin - Quản trị]
      summary: Quản lý yêu cầu đổi thưởng
      security: [{cookieAuth: []}]
      responses:
         200: {description: Danh sách yêu cầu}

  /api/admin/redemptions/update-status:
    post:
      tags: [Admin - Quản trị]
      summary: Cập nhật trạng thái đổi thưởng
      security: [{cookieAuth: []}]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id: {type: integer}
                status: {type: string}
      responses:
         200: {description: Cập nhật thành công}

  /api/admin/redemptions/save-account-name:
    post:
      tags: [Admin - Quản trị]
      summary: Lưu tên tài khoản cho đơn đổi thưởng
      security: [{cookieAuth: []}]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id: {type: integer}
                account_name: {type: string}
      responses:
         200: {description: Lưu thành công}

  /api/admin/redemptions/save-transfer-status:
    post:
      tags: [Admin - Quản trị]
      summary: Lưu trạng thái chuyển tiền
      security: [{cookieAuth: []}]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id: {type: integer}
                transfer_status: {type: string}
      responses:
         200: {description: Lưu thành công}

  /api/admin/redemptions/delete:
    post:
      tags: [Admin - Quản trị]
      summary: Xóa yêu cầu đổi thưởng
      security: [{cookieAuth: []}]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id: {type: integer}
      responses:
         200: {description: Xóa thành công}

  /api/admin/redemptions/stats:
    get:
      tags: [Admin - Quản trị]
      summary: Thống kê đổi thưởng
      security: [{cookieAuth: []}]
      responses:
         200: {description: Dữ liệu thống kê}

  /api/users:
    get:
      tags: [Admin - Quản trị]
      summary: Quản lý người dùng
      security: [{cookieAuth: []}]
      responses:
         200: {description: Danh sách người dùng}

  /api/users/show:
    get:
      tags: [Admin - Quản trị]
      summary: Chi tiết người dùng
      security: [{cookieAuth: []}]
      parameters:
        - {name: id, in: query, schema: {type: integer}}
      responses:
         200: {description: Chi tiết}

  /api/admin/activity-logs:
    get:
      tags: [Admin - Quản trị]
      summary: Nhật ký hoạt động
      security: [{cookieAuth: []}]
      responses:
         200: {description: Danh sách log}

  /api/admin/activity-logs/user/{id}:
    get:
      tags: [Admin - Quản trị]
      summary: Log theo người dùng
      security: [{cookieAuth: []}]
      parameters:
         - {name: id, in: path, required: true, schema: {type: integer}}
      responses:
         200: {description: Danh sách log}

  /api/admin/activity-logs/entity/{type}/{id}:
    get:
      tags: [Admin - Quản trị]
      summary: Log theo đối tượng (Entity)
      security: [{cookieAuth: []}]
      parameters:
         - {name: type, in: path, required: true, schema: {type: string}}
         - {name: id, in: path, required: true, schema: {type: integer}}
      responses:
         200: {description: Danh sách log}

  /api/admin/activity-logs/action/{action}:
    get:
      tags: [Admin - Quản trị]
      summary: Log theo hành động
      security: [{cookieAuth: []}]
      parameters:
         - {name: action, in: path, required: true, schema: {type: string}}
      responses:
         200: {description: Danh sách log}

  /api/admin/activity-logs/cleanup:
    delete:
      tags: [Admin - Quản trị]
      summary: Dọn dẹp nhật ký
      security: [{cookieAuth: []}]
      responses:
         200: {description: Dọn dẹp thành công}

  /api/admin/top-surveys:
    get:
      tags: [Admin - Quản trị]
      summary: Top khảo sát có nhiều phản hồi
      security: [{cookieAuth: []}]
      responses:
         200: {description: Danh sách}

  /api/admin/user-stasts:
    get:
      tags: [Admin - Quản trị]
      summary: Thống kê người dùng
      security: [{cookieAuth: []}]
      responses:
         200: {description: Thống kê}

  /api/admin/survey-stats:
    get:
      tags: [Admin - Quản trị]
      summary: Thống kê khảo sát
      security: [{cookieAuth: []}]
      responses:
         200: {description: Thống kê}

  /api/admin/response-stats:
    get:
      tags: [Admin - Quản trị]
      summary: Thống kê phản hồi
      security: [{cookieAuth: []}]
      responses:
         200: {description: Thống kê}

  /api/admin/event-stats:
    get:
      tags: [Admin - Quản trị]
      summary: Thống kê sự kiện
      security: [{cookieAuth: []}]
      responses:
         200: {description: Thống kê}

  # ==================== PUBLIC ====================
  /api/health:
    get:
      tags: [Public - Công khai]
      summary: Kiểm tra trạng thái hệ thống (Health check)
      responses:
        200:
          description: API đang hoạt động bình thường
          content:
            application/json:
              schema:
                type: object
                properties:
                  error: {type: boolean, example: false}
                  message: {type: string, example: "API is running"}
                  time: {type: string, format: date-time}
